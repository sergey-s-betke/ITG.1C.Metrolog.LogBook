\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{gost8.009}[2014/12/04 v0.1 ГОСТ 8.009-84 ГСИ. Нормируемые метрологические характеристики средств измерений]

\ProcessOptions\relax

\RequirePackage{xparse}

\def\@make@csname#1{%
	\if\relax\noexpand#1% is command?
		\expandafter\@gobble\string#1%
	\else%
		#1%
	\fi%
}

% #1 - текстовое обозначение нормируемой величины, например - \СКО, \ПГ, \ПГО
% #2 - текстовое наименование метрологической характеристики, например - "среднеквадратичное отклонение", со строчной буквы
% #3 - текстовое наименование нормируемой величины, например - "предел допускаемой абсолютной погрешности", со строчной буквы
% #4 - символьное обозначение
\newcommand\DeclareAccuracyNorm[4]{
	\@namedef{AN@\@make@csname#1@abbreviation}{\@make@csname#1}
	\@namedef{AN@\@make@csname#1@caption}{#2}
	\@namedef{AN@\@make@csname#1@norm@caption}{#3}
	\@namedef{AN@\@make@csname#1@symbol}{#4}
	\expandafter\DeclareDocumentCommand\csname\@make@csname#1\endcsname{d()}{%
		\ensuremath{%
			\@nameuse{AN@\@make@csname#1@symbol}%
			\IfNoValueF{##1}{\left(##1\right)}%
		}
	}
}

\def\AN@check@exists#1{%
	\@ifundefined{AN@#1@abbreviation}{%
		\PackageError{mi2246}{Accuracy norm #1 doesn't defined.}\@ehd%
	}{}%
}

% #1 - текстовое обозначение нормируемой величины, например - \СКО, \ПГ, \ПГО
\newcommand\AccuracyNormAbbreviation[1]{%
	\AN@check@exists{#1}%
	\@nameuse{AN@#1@abbreviation}%
}

% #1 - текстовое обозначение нормируемой величины, например - \СКО, \ПГ, \ПГО
\newcommand\AccuracyCaption[1]{%
	\AN@check@exists{#1}%
	\@nameuse{AN@#1@caption}%
}

% #1 - текстовое обозначение нормируемой величины, например - \СКО, \ПГ, \ПГО
\newcommand\AccuracyNormCaption[1]{%
	\AN@check@exists{#1}%
	\@nameuse{AN@#1@norm@caption}%
}

% #1 - текстовое обозначение нормируемой величины, например - \СКО, \ПГ, \ПГО
\newcommand\AccuracyNormSymbol[1]{%
	%\AN@check@exists{#1}%
	\ensuremath{\@nameuse{AN@#1@symbol}}%
}


\DeclareAccuracyNorm{ПГ}
	{абсолютная погрешность}
	{предел допускаемой абсолютной погрешности}
	{\Delta} % п.2.1
\DeclareAccuracyNorm{ПГО}
	{относительная погрешность}
	{предел допускаемой относительной погрешности}
	{\delta} % п.2.1
\DeclareAccuracyNorm{НПГ}
	{неисключённая систематическая погрешность}
	{предел неисключённой систематической погрешности}
	{\Theta} % п.2.2
\DeclareAccuracyNorm{СКО}
	{среднее квадратическое отклонение}
	{среднее квадратическое отклонение}
	{S} % п.2.3
\DeclareAccuracyNorm{РПГ}
	{размах абсолютной погрешности}
	{размах абсолютной погрешности}
	{R} % п.2.3
\DeclareAccuracyNorm{НСТБ}
	{нестабильность}
	{нестабильность}
	{\nu} % п.2.5
\DeclareAccuracyNorm{ВР}
	{вариация}
	{вариация}
	{V} % п.2.5
