\NeedsTeXFormat{LaTeX2e}
\ProvidesClass{gost2.610.logbook}[2014/11/05 v0.1 GOST 2.610-2006 Logbook]

\DeclareOption*{%
	\PassOptionsToClass{\CurrentOption}{gost2.105}
}

\ExecuteOptions{pointsubsection}

\ProcessOptions\relax

\RequirePackage{xecyr}
\RequirePackage{xstring}

\AtBeginDocument{
	\ESKDcompany{\@nameuse{@Формуляр@Организация@Наименование}}
	\ifx\@Формуляр@Организация@Подразделение\empty\else
		\ESKDdepartment{\@nameuse{@Формуляр@Организация@Подразделение}}
	\fi
	\ifx\@Формуляр@Изделие@КодОКП\empty\else
		\ESKDclassCode{ОКП~\StrLeft{\@nameuse{@Формуляр@Изделие@КодОКП}}{2}~\StrGobbleLeft{\@nameuse{@Формуляр@Изделие@КодОКП}}{2}}
	\fi
	\ESKDtitle{\@nameuse{@Формуляр@Изделие@Наименование}}
	\ESKDdocName{Формуляр}
	\ESKDsignature{\@nameuse{@Формуляр@Изделие@Обозначение}\@nameuse{@Формуляр@Часть}}
	
	\ESKDtitleDesignedBy{Ведущий инженер по метрологии}{Богданова~Т.~М.}
	\ESKDtitleDesignedBy{Инженер по метрологии}{Дель~Н.~Н.}
	
	\ESKDtitleAgreedBy{Начальник МО}{Ядрышникова~И.~С.}
	\ESKDtitleAgreedBy{Инженер по стандартизации}{Наумова~Т.~И.}
	\ESKDtitleAgreedBy{Инженер по стандартизации}{Наумова~Т.~И.}
	
	\ESKDtitleApprovedBy{%
		\@nameuse{@Формуляр@Утвердил@ДолжностноеЛицо@Должность}%
	}{\@Формуляр@ФамилияИО{Утвердил}}

	\ESKDauthor{\@Формуляр@ФамилияИО{Разработал@1}}
	\ESKDchecker{\@Формуляр@ФамилияИО{Проверил}}
	\ESKDnormContr{\@Формуляр@ФамилияИО{Нормоконтроль}}
	\ESKDapprovedBy{\@Формуляр@ФамилияИО{Утвердил}}
	
	%\ESKDdate{2014/10/24}
}

\LoadClass{gost2.105}
\RequirePackage{gost2.612}
\RequirePackage{todo}

\providecommand{\УказанияПоЭксплуатацииИзделия}[1]{
	\@namedef{Формуляр@УказанияПоЭксплуатацииИзделия}{#1}
}

\УказанияПоЭксплуатацииИзделия{
	\paragraph{} Перед эксплуатацией изделия следует внимательно изучить
	эксплуатационную документацию на изделие, в частности - Руководство по эксплуатации\todo{Необходима подстановка обозначения руководства и его наименования}.
	\todo{Для оформления ссылок на сторонние документы необходимо определить свои
		макросы, которые обеспечат корректные пробелы и, возможно, другое оформление}
}

\providecommand{\ПравилаЗаполненияИВеденияФормуляра}[1]{
	\@namedef{Формуляр@ПравилаЗаполненияИВеденияФормуляра}{#1}
}

\ПравилаЗаполненияИВеденияФормуляра{
	\paragraph{}\label{МОЛ} За ведение формуляра отвечает лицо, ответственное за эксплуатацию изделия.
	Ответственное за эксплуатацию изделия лицо указано в
	инвентарной карточке учёта объекта основных средств (форма №~ОС-6),
	хранящейся в регистрах бухгалтерского учёта.
	
	\paragraph{} Не допускаются записи в формуляре карандашом, смывающимися чернилами.
	Не допускаются подчистки.
	Неправильная запись должна быть аккуратно зачёркнута и рядом (в следующей строке) внесена новая запись.
	
	\paragraph{} Новые записи следует заверять подписью лица, ответственного за эксплуатацию изделия.
	После подписи следует указать фамилию и инициалы ответственного лица (вместо подписи допускается
	проставлять личный штамп).
	
	\paragraph{} При передаче изделия на другое предприятие итоговые записи по
	наработке следует заверять печатью предприятия, передающего изделие.
}

\AtBeginDocument{
	\maketitle
	\tableofcontents
	
	
	\ifx\Формуляр@УказанияПоЭксплуатацииИзделия\empty\else
	\ifx\Формуляр@ПравилаЗаполненияИВеденияФормуляра\empty\else
	
	\section{Общие указания}
	
	\ifx\Формуляр@УказанияПоЭксплуатацииИзделия\empty\else
	\subsection{Указания по эксплуатации изделия}
	\Формуляр@УказанияПоЭксплуатацииИзделия
	\fi
	
	\ifx\Формуляр@ПравилаЗаполненияИВеденияФормуляра\empty\else
	\subsection{Правила заполнения и ведения формуляра}
	\Формуляр@ПравилаЗаполненияИВеденияФормуляра
	\fi
	
	\fi
	\fi
	
	
	\section{Основные сведения об изделии}
	
	\paragraph{Наименование изделия}: \@nameuse{@Формуляр@Изделие@1@Наименование}.
	\todo{Заменить на свой макрос}
	
	\paragraph{Дата изготовления}:
	\todo{Указать дату изготовления, форматировать макросом}
	
	\paragraph{Производитель}:
	\todo{Указать производителя}
	
	\paragraph{Заводской номер}:
	\todo{Указать заводской номер}
	
	\paragraph{Тип средства измерения}:
	\todo{Указать тип средства измерения, если он указан в реквизитах (то есть - если это средство измерения, а также указать номер сертификата и прочие аттрибуты типа СИ)}
	
	\paragraph{Регистрационный номер в Государственном реестре средств измерений}:
	\todo{Указать номер в ГРСИ, если он указан}
	\todo{Дать гиперссылку на сайт ФИФ на номере ГРСИ, либо вообще - на всём параграфе}
	\todo{Ввести сокращения СИ, ГРСИ, расшифровах их в соответствующем разделе}
	
	\paragraph{Номер свидетельства о регистрации типа средства измерения}:
	\todo{Указать номер свидетельства, если он указан}
	
	\paragraph{Срок действия свидетельства о регистрации типа средства измерения}:
	\todo{Указать срок действия свидетельства, если он указан}
	
	
	\section{Основные технические данные}
	
	\todo{Заполнить раздел <<Основные технические сведения>> сведениями об измерительных канал и
		нормируемых метрологических характеристиках}
	
	Дополнительные сведения о технических данных изделия приведены в руководстве по эксплуатации.
	\todo{Абзац вставлять только в том случае, если руководство по эксплуатации указано}
	\todo{Указать обозначение руководства по эксплуатации}
	
	
	\section{Индивидуальные особенности изделия}
	
	\todo{Раздел <<Индивидуальные особенности изделия>> приводить только в том случае, если таковые
		указаны в данных}
	
	
	\section{Комплектность}
	
	\todo{Раздел <<Комплектность>>  приводить только в том случае, если данные о комплектности
		присутствуют в данных}
	
	
	\section{Ресурсы, сроки службы и хранения, гарантии изготовителя}
	
	\todo{Раздел <<Ресурсы, сроки службы и хранения, гарантии изготовителя>>
		приводить только в том случае, если данные присутствуют}
	
	
	\section{Консервация}
	
	\todo{Заполнить раздел <<Консервация>>}
	
	
	\section{Свидетельство об упаковывании}
	
	\todo{Раздел <<Свидетельство об упаковывании>>
		приводить только в том случае, если данные присутствуют}
	
	Данные об упаковывании изделия приведены в руководстве по эксплуатации.
	\todo{Абзац вставлять только в том случае, если руководство по эксплуатации указано}
	\todo{Указать обозначение руководства по эксплуатации}
	
	
	\section{Свидетельство о приёмке}
	
	\todo{Раздел <<Свидетельство о приёмке>>
		приводить только в том случае, если данные присутствуют}
	
	Данные о приёмке изделия приведены в руководстве по эксплуатации.
	\todo{Абзац вставлять только в том случае, если руководство по эксплуатации указано}
	\todo{Указать обозначение руководства по эксплуатации}
	
	
	\section{Движение изделия при эксплуатации}
	
	\todo{Заполнить раздел <<Движение изделия при эксплуатации>>}
	
	\subsection{Приём и передача изделия}
	
	\todo{Заполнить раздел <<Приём и передача изделия>>}
	
	\subsection{Сведения о закреплении изделия при эксплуатации}
	
	\todo{Заполнить раздел <<Сведения о закреплении изделия при эксплуатации>>}
	
	
	%\section{Учёт работы изделия}
	
	
	\section{Учёт технического обслуживания}
	
	\todo{Заполнить раздел <<Учёт технического обслуживания>>}
	
	
	%\section{Учёт работы по бюллетням и указаниям}
	
	
	\section{Работы при эксплуатации}
	
	\todo{Заполнить раздел <<Работы при эксплуатации>>}
	
	\subsection{Учёт выполнения работ}
	
	\todo{Заполнить раздел <<Учёт выполнения работ>>}
	
	\subsection{Особые замечания по эксплуатации и аварийным случаям}
	
	\todo{Заполнить раздел <<Особые замечания по эксплуатации и аварийным случаям>>}
	
	\subsection{Поверка средств измерений}
	
	\todo{Заполнить раздел <<Поверка средств измерений>>}
	
	\subsection{Техническое освидетельствование контрольными органами}
	
	\todo{Заполнить раздел <<Техническое освидетельствование контрольными органами>>,
		если он требуется для изделия}
	
	\subsection{Сведения о рекламациях}
	
	\todo{Заполнить раздел <<Сведения о рекламациях>>}
	
	
	\section{Хранение}
	
	\todo{Заполнить раздел <<Хранение>>}
	
	
	\section{Ремонт}
	
	\todo{Заполнить раздел <<Ремонт>>}
	
	\subsection{Краткие сведения о произведённом ремонте}
	
	\todo{Заполнить раздел <<Краткие сведения о произведённом ремонте>>}
	
	\subsection{Данные приёмосдаточных испытаний}
	
	\todo{Заполнить раздел <<Краткие сведения о произведённом ремонте>>}
	
	\subsection{Свидетельство о приёмке и гарантии}
	
	\todo{Заполнить раздел <<Свидетельство о приёмке и гарантии>>}
	
	
	\section{Особые отметки}
	
	\todo{Вставить чистые графы для раздела <<Особые отметки>> для ручного заполнения}
	\todo{В дальнейшем заполнять раздел <<Особые отметки>>}
	
	
	\section{Сведения об утилизации}
	
	Сведения об утилизации изделия приведены в руководстве по эксплуатации.
	\todo{Указать обозначение руководства по эксплуатации}
	
	
	\section{Контроль состояния изделия и ведения формуляра}
	
	\todo{Заполнить раздел <<Контроль состояния изделия и ведения формуляра>>}
	
	
	\section{Сведения о цене и условиях приобретения изделия}
	
	\todo{Заполнить раздел <<Сведения о цене и условиях приобретения изделия>>}
}

\AtEndDocument{
	\newpage
	\todo{Создать и заполнить раздел терминов и определений}
	\todo{Создать и заполнить раздел списка литературы}
	\newpage
	
	\todos{}
}
