\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{gost2.304}[2014/10/22 v0.1 GOST 2.304-81]

\RequirePackage{ifxetex}
\RequireXeTeX

\RequirePackage{xecyr}

% Enable loading of OpenType fonts
\usepackage[cm-default]{fontspec}
\defaultfontfeatures{Ligatures=TeX,Scale=MatchLowercase}

% подключаем чертёжные шрифты типа A
\DeclareOption{A}{
	\newfontfamily\gostfontA{GOST 2.304-81 type A}[
		Path = fonts/ ,
		Extension = .ttf ,
		% UprightFont = * ,
		% BoldFont = * Bold ,
		BoldFeatures = { FakeBold = 1.5 } ,
		ItalicFont = * Italic ,
		% BoldItalicFont = * Bold Italic ,
		BoldItalicFeatures = { FakeBold = 1.5 } ,
		% SlantedFont = * Italic ,
		% BoldSlantedFont = * Bold Italic,
		% SmallCapsFont = *
	]
	\let\gostA\gostfontA
	\let\gostfont\gostfontA
	\setmainfont{GOST 2.304-81 type A}[
		Path = fonts/ ,
		Extension = .ttf ,
		% UprightFont = * ,
		% BoldFont = * Bold ,
		BoldFeatures = { FakeBold = 1.5 } ,
		ItalicFont = * Italic ,
		% BoldItalicFont = * Bold Italic,
		BoldItalicFeatures = { FakeBold = 1.5 } ,
		% SlantedFont = * Italic ,
		% BoldSlantedFont = * Bold Italic,
		% SmallCapsFont = *
			]
	%\setmainfont{OpenGost Type A TT} 
	%\setromanfont{OpenGost Type A TT} 
	%\setsansfont{OpenGost Type A TT} 
}

% подключаем чертёжные шрифты типа B
\DeclareOption{B}{
	\newfontfamily\gostfontB{GOST 2.304-81 type B}[
		Path = fonts/ ,
		Extension = .ttf ,
		% UprightFont = * ,
		% BoldFont = * Bold ,
		BoldFeatures = { FakeBold = 1.5 } ,
		ItalicFont = * Italic ,
		% BoldItalicFont = * Bold Italic ,
		BoldItalicFeatures = { FakeBold = 1.5 } ,
		% SlantedFont = * Italic ,
		% BoldSlantedFont = * Bold Italic,
		% SmallCapsFont = *
	]
	\let\gostB\gostfontB
	\let\gostfont\gostfontB
	\setmainfont{GOST 2.304-81 type B}[
		Path = fonts/ ,
		Extension = .ttf ,
		% UprightFont = * ,
		% BoldFont = * Bold ,
		BoldFeatures = { FakeBold = 1.5 } ,
		ItalicFont = * Italic ,
		% BoldItalicFont = * Bold Italic ,
		BoldItalicFeatures = { FakeBold = 1.5 } ,
		% SlantedFont = * Italic ,
		% BoldSlantedFont = * Bold Italic,
		% SmallCapsFont = *
	]
	%\setromanfont{OpenGost Type B TT} 
	%\setsansfont{OpenGost Type B TT} 
}

\ExecuteOptions{B}

\ProcessOptions\relax
